@import 'tailwindcss';

/* Dark mode custom variant for Tailwind v4 */
@custom-variant dark (&:where(.dark, .dark *));

/* ============================================================
   Color System — CSS Custom Properties
   ============================================================ */
:root {
	/* Backgrounds */
	--bg-page: #f9fafb; /* gray-50 */
	--bg-card: #ffffff; /* white */
	--bg-card-hover: #f9fafb; /* gray-50 */
	--bg-elevated: #ffffff; /* white */
	--bg-inset: #f3f4f6; /* gray-100 */
	--bg-input: #ffffff; /* white */

	/* Text */
	--text-primary: #111827; /* gray-900 */
	--text-secondary: #4b5563; /* gray-600 */
	--text-tertiary: #6b7280; /* gray-500 */
	--text-muted: #9ca3af; /* gray-400 */

	/* Borders */
	--border-default: #e5e7eb; /* gray-200 */
	--border-input: #d1d5db; /* gray-300 */
	--border-subtle: #f3f4f6; /* gray-100 */

	/* Activity (blue) */
	--color-activity: #2563eb; /* blue-600 */
	--color-activity-hover: #1d4ed8; /* blue-700 */
	--color-activity-bg: #eff6ff; /* blue-50 */
	--color-activity-bg-strong: #dbeafe; /* blue-100 */
	--color-activity-text: #1e40af; /* blue-800 */
	--color-activity-border: #bfdbfe; /* blue-200 */

	/* Food (green) */
	--color-food: #16a34a; /* green-600 */
	--color-food-hover: #15803d; /* green-700 */
	--color-food-bg: #f0fdf4; /* green-50 */
	--color-food-bg-strong: #dcfce7; /* green-100 */
	--color-food-text: #166534; /* green-800 */
	--color-food-border: #bbf7d0; /* green-200 */

	/* Status: success */
	--color-success: #16a34a;
	--color-success-bg: #f0fdf4;
	--color-success-text: #166534;
	--color-success-border: #bbf7d0;

	/* Status: danger */
	--color-danger: #ef4444;
	--color-danger-hover: #dc2626;
	--color-danger-bg: #fef2f2;
	--color-danger-text: #991b1b;
	--color-danger-border: #fecaca;

	/* Status: warning */
	--color-warning: #d97706;
	--color-warning-bg: #fffbeb;
	--color-warning-text: #92400e;
	--color-warning-border: #fde68a;

	/* Neutral (for chart fills, muted indicators) */
	--color-neutral: #d1d5db; /* gray-300 */

	/* Favorite star (yellow) */
	--color-favorite: #facc15; /* yellow-400 */

	/* Chart colors (for data visualization) */
	--chart-color-1: #3b82f6; /* blue-500 */
	--chart-color-2: #ef4444; /* red-500 */
	--chart-color-3: #10b981; /* emerald-500 */
	--chart-color-4: #f59e0b; /* amber-500 */
	--chart-color-5: #8b5cf6; /* violet-500 */
	--chart-color-6: #ec4899; /* pink-500 */
	--chart-color-7: #06b6d4; /* cyan-500 */
	--chart-color-8: #f97316; /* orange-500 */
	--chart-color-9: #6366f1; /* indigo-500 */

	/* Toast (inverted surface) */
	--bg-toast: #111827; /* gray-900 */
	--text-toast: #ffffff;
	--color-toast-action: #93c5fd; /* blue-300 */

	/* Shadows */
	--shadow-card: 0 1px 3px 0 rgb(0 0 0 / 0.06), 0 1px 2px -1px rgb(0 0 0 / 0.06);
	--shadow-elevated: 0 10px 15px -3px rgb(0 0 0 / 0.08), 0 4px 6px -4px rgb(0 0 0 / 0.08);
}

.dark {
	/* Backgrounds */
	--bg-page: #030712; /* gray-950 */
	--bg-card: #111827; /* gray-900 */
	--bg-card-hover: #1f2937; /* gray-800 */
	--bg-elevated: #1f2937; /* gray-800 */
	--bg-inset: #1f2937; /* gray-800 */
	--bg-input: #1f2937; /* gray-800 */

	/* Text */
	--text-primary: #f3f4f6; /* gray-100 */
	--text-secondary: #d1d5db; /* gray-300 */
	--text-tertiary: #9ca3af; /* gray-400 */
	--text-muted: #6b7280; /* gray-500 */

	/* Borders */
	--border-default: #374151; /* gray-700 */
	--border-input: #4b5563; /* gray-600 */
	--border-subtle: #1f2937; /* gray-800 */

	/* Activity (blue) — brighter for dark mode */
	--color-activity: #60a5fa; /* blue-400 */
	--color-activity-hover: #93bbfd; /* blue-300 */
	--color-activity-bg: rgba(23, 37, 84, 0.5); /* blue-950/50% */
	--color-activity-bg-strong: #1e3a5f; /* blue-900 */
	--color-activity-text: #93c5fd; /* blue-300 */
	--color-activity-border: #1e40af; /* blue-800 */

	/* Food (green) */
	--color-food: #4ade80; /* green-400 */
	--color-food-hover: #86efac; /* green-300 */
	--color-food-bg: rgba(5, 46, 22, 0.5); /* green-950/50% */
	--color-food-bg-strong: #14532d; /* green-900 */
	--color-food-text: #86efac; /* green-300 */
	--color-food-border: #166534; /* green-800 */

	/* Status: success */
	--color-success: #4ade80;
	--color-success-bg: rgba(5, 46, 22, 0.5);
	--color-success-text: #86efac;
	--color-success-border: #166534;

	/* Status: danger */
	--color-danger: #f87171;
	--color-danger-hover: #ef4444;
	--color-danger-bg: rgba(69, 10, 10, 0.5);
	--color-danger-text: #fca5a5;
	--color-danger-border: #991b1b;

	/* Status: warning */
	--color-warning: #fbbf24;
	--color-warning-bg: rgba(69, 26, 3, 0.5);
	--color-warning-text: #fcd34d;
	--color-warning-border: #92400e;

	/* Neutral */
	--color-neutral: #4b5563; /* gray-600 */

	/* Favorite star (yellow) */
	--color-favorite: #fbbf24; /* yellow-400 brighter for dark mode */

	/* Chart colors (same in dark mode for consistency) */
	--chart-color-1: #3b82f6; /* blue-500 */
	--chart-color-2: #ef4444; /* red-500 */
	--chart-color-3: #10b981; /* emerald-500 */
	--chart-color-4: #f59e0b; /* amber-500 */
	--chart-color-5: #8b5cf6; /* violet-500 */
	--chart-color-6: #ec4899; /* pink-500 */
	--chart-color-7: #06b6d4; /* cyan-500 */
	--chart-color-8: #f97316; /* orange-500 */
	--chart-color-9: #6366f1; /* indigo-500 */

	/* Toast (inverted surface) */
	--bg-toast: #f3f4f6; /* gray-100 */
	--text-toast: #111827; /* gray-900 */
	--color-toast-action: #2563eb; /* blue-600 */

	/* Shadows */
	--shadow-card: 0 1px 3px 0 rgb(0 0 0 / 0.2), 0 1px 2px -1px rgb(0 0 0 / 0.2);
	--shadow-elevated: 0 10px 15px -3px rgb(0 0 0 / 0.3), 0 4px 6px -4px rgb(0 0 0 / 0.3);
}

/* ============================================================
   Utility Shorthand Classes
   ============================================================ */
.card {
	background: var(--bg-card);
	border-radius: theme(borderRadius.xl);
	border: 1px solid var(--border-default);
	box-shadow: var(--shadow-card);
}

.bg-surface {
	background: var(--bg-page);
}

.bg-inset {
	background: var(--bg-inset);
}

.text-heading {
	color: var(--text-primary);
}

.text-body {
	color: var(--text-secondary);
}

.text-label {
	color: var(--text-tertiary);
}

.text-subtle {
	color: var(--text-muted);
}

/* Type-specific accent classes */
.type-activity {
	background-color: var(--color-activity);
	color: white;
}

.type-food {
	background-color: var(--color-food);
	color: white;
}

.type-activity-muted {
	background-color: var(--color-activity-bg);
	border-color: var(--color-activity-border);
}

.type-food-muted {
	background-color: var(--color-food-bg);
	border-color: var(--color-food-border);
}

/* ============================================================
   Base Styles
   ============================================================ */
html {
	font-family:
		system-ui,
		-apple-system,
		BlinkMacSystemFont,
		'Segoe UI',
		Roboto,
		sans-serif;
}

body {
	background: var(--bg-page);
	color: var(--text-primary);
	min-height: 100vh;
	transition:
		background-color 0.2s,
		color 0.2s;
}

/* ============================================================
   Form Components
   ============================================================ */
.form-label {
	display: block;
	font-size: theme(fontSize.sm);
	font-weight: 500;
	color: var(--text-secondary);
	margin-bottom: theme(spacing.1);
}

.form-input {
	width: 100%;
	min-width: 0;
	max-width: 100%;
	padding: theme(spacing.2) theme(spacing.3);
	border: 1px solid var(--border-input);
	border-radius: theme(borderRadius.md);
	background: var(--bg-input);
	color: var(--text-primary);
	transition:
		border-color 0.15s,
		box-shadow 0.15s;
}
.form-input:focus {
	outline: none;
	box-shadow: 0 0 0 2px var(--color-activity);
	border-color: var(--color-activity);
}
.form-input::placeholder {
	color: var(--text-muted);
}

/* Fix for HTML5 date/time inputs that have browser-defined minimum widths */
input[type='date'],
input[type='time'],
input[type='datetime-local'] {
	min-width: 0;
	max-width: 100%;
}

.form-input-sm {
	width: 100%;
	min-width: 0;
	max-width: 100%;
	padding: theme(spacing.2) theme(spacing.3);
	border: 1px solid var(--border-input);
	border-radius: theme(borderRadius.md);
	background: var(--bg-input);
	color: var(--text-primary);
	font-size: 1rem; /* 16px prevents iOS Safari auto-zoom on focus */
	transition:
		border-color 0.15s,
		box-shadow 0.15s;
}
.form-input-sm:focus {
	outline: none;
	box-shadow: 0 0 0 2px var(--color-activity);
	border-color: var(--color-activity);
}
.form-input-sm::placeholder {
	color: var(--text-muted);
}

/* Dark mode color-scheme for native form controls */
.dark input[type='date'],
.dark input[type='time'],
.dark input[type='datetime-local'],
.dark select {
	color-scheme: dark;
}

/* ============================================================
   Buttons
   ============================================================ */
.btn {
	@apply px-4 py-2 rounded-md font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed;
}

.btn-primary {
	@apply px-4 py-2 rounded-md font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed;
	background-color: var(--color-activity);
	color: white;
}
.btn-primary:hover:not(:disabled) {
	background-color: var(--color-activity-hover);
}

.btn-success {
	@apply px-4 py-2 rounded-md font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed;
	background-color: var(--color-food);
	color: white;
}
.btn-success:hover:not(:disabled) {
	background-color: var(--color-food-hover);
}

.btn-secondary {
	@apply px-4 py-2 rounded-md font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed;
	background: var(--bg-inset);
	color: var(--text-secondary);
	border: 1px solid var(--border-default);
}
.btn-secondary:hover:not(:disabled) {
	background: var(--bg-card-hover);
}

.btn-danger {
	@apply px-4 py-2 rounded-md font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed;
	background-color: var(--color-danger);
	color: white;
}
.btn-danger:hover:not(:disabled) {
	background-color: var(--color-danger-hover);
}

.btn-sm {
	@apply px-3 py-2 text-sm;
}

.btn-lg {
	@apply px-4 py-3;
}

/* ============================================================
   Filter Chips / Tags
   ============================================================ */

/**
 * .chip — pill-shaped removable filter tag (neutral / generic)
 * .chip-active — activity-accent variant (blue) for category filters
 *
 * Usage: <button className="chip">Label <X /></button>
 *        <button className="chip chip-active">Category <X /></button>
 */
.chip {
	@apply inline-flex items-center gap-1 text-xs px-2 py-1 rounded-full border transition-colors;
	background: var(--bg-inset);
	color: var(--text-tertiary);
	border-color: var(--border-default);
}
.chip:hover {
	background: var(--bg-card-hover);
}

.chip-active {
	background: var(--color-activity-bg);
	color: var(--color-activity-text);
	border-color: var(--color-activity-border);
}
.chip-active:hover {
	background: var(--color-activity-bg-strong);
}

/* ============================================================
   Animations
   ============================================================ */
@keyframes fade-in {
	from {
		opacity: 0;
		transform: translateY(8px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

.animate-fade-in {
	animation: fade-in 0.2s ease-out;
}

@keyframes slide-up {
	from {
		transform: translateY(100%);
	}
	to {
		transform: translateY(0);
	}
}

.animate-slide-up {
	animation: slide-up 0.25s ease-out;
}
